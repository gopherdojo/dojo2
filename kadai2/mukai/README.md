# io.Readerとio.Writerについて調べてみよう

##標準パッケージでどのように使われているか

ネットワーク(TCP, UDP, IP, DNSなど)通信の読み書き

ファイルディスクリプタの読み書き

ファイルの読み書き

ランダム値の取得

HTTP bodyの取得

zipファイルの非圧縮データの取得

zipファイルチェックサムの読み込み

jsonエンコード

base64デコード

ログ書き込み

置換処理
 
##io.Readerとio.Writerがあることでどういう利点があるのか具体例を挙げて考えてみる

入出力は往々にしてテストの際に用意しづらいのでio.Reader, Writerで抽象化することによって入出力をモックに変えてテストがしやすくなる

例えば、dnsclient_unix_test.goではfakeDNSConnというReaderおよびWriterをインタフェースとして持つ構造体が定義されている.

fakeDNSConnでは任意の処理の結果をレスポンスとして受け取れるように実装がなされている.

これによって、任意に再現させづらいタイムアウトやリトライなどのエラーやネットワーク環境によらないテストを可能にしている.

Writerも同様にメモリに対して書き込みを行う実装がなされているため、ネットワーク環境によらないかつ結果のテストを可能にしている.
 
